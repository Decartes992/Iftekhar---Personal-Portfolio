/**
 * Theme Manager - Optimized for performance
 * Prevents FOUC by running inline in <head>
 * @version 1.1.0
 */
!function(){"use strict";const e="theme-preference";let t=null;const n=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",o=()=>{try{return localStorage.getItem(e)}catch{return null}},r=e=>{try{localStorage.setItem(e,e)}catch{}},a=e=>{if(!e)return;const t="dark"===e;document.documentElement.classList.toggle("dark",t),document.documentElement.style.colorScheme=e;const n=document.querySelector('meta[name="theme-color"]');n&&n.setAttribute("content",t?"#0f172a":"#ffffff")},s=e=>{const n=new CustomEvent("themechange",{detail:{theme:e,isDark:"dark"===e}});document.dispatchEvent(n)},c=()=>{const c=o()||n();t=c,a(c),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{o()||(t=e.matches?"dark":"light",a(t),s(t))})};window.ThemeManager={getTheme:()=>t||n(),setTheme:e=>{["light","dark"].includes(e)&&(t=e,a(e),r(e),s(e))},toggleTheme:()=>{const e="light"===t?"dark":"light";return window.ThemeManager.setTheme(e),e},resetToSystem:()=>{const e=n();return t=e,a(e),localStorage.removeItem(e),s(e),e},isSystemPreference:()=>!o()},c(),window.addEventListener("beforeunload",()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",()=>{})})}();